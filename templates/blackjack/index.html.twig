{% extends 'base.html.twig' %}

{% block title %}Blackjack{% endblock %}

{% block body %}
<div style="text-align: center; margin-top: 50px;">
    <h1>Blackjack</h1>

    {% if hand is not empty %}
        <h2>Dina kort:</h2>
        <ul style="list-style: none; padding: 0;">
            {% for card in hand %}
                <li>{{ card.getDisplay() }} ({{ card.getValue()|join('/') }})</li>
            {% endfor %}
        </ul>

        <p style="font-size: 1.2em;">
            Summa:
            {% if totalHigh %}
                {{ totalLow }} / {{ totalHigh }}
            {% else %}
                {{ totalLow }}
            {% endif %}
        </p>

        {% if isBust %}
            <p style="color: red; font-weight: bold;">Du förlorade (Bust)!</p>
        {% elseif hasStayed %}
            {% if hasBlackjack %}
                <p style="color: gold; font-weight: bold;">Blackjack!</p>
            {% else %}
                <p style="color: green; font-weight: bold;">
                    Du stannade på {{ totalHigh ?? totalLow }}
                </p>
            {% endif %}
        {% endif %}
    {% endif %}

    {% if not isBust and not hasStayed %}
        <form method="POST" action="{{ path('blackjack_hit') }}">
            <button type="submit">Dra kort</button>
        </form>

        <form method="POST" action="{{ path('blackjack_stay') }}">
            <button type="submit" style="margin-top: 10px;">Stanna</button>
        </form>
    {% endif %}

    <form method="POST" action="{{ path('blackjack_reset') }}">
        <button type="submit" style="margin-top: 10px;">Återställ</button>
    </form>

    <div style="margin-top: 20px;">
    <h3>Next card in deck:</h3>
    {% if nextCard %}
        {{ nextCard.getDisplay() }} ({{ nextCard.getSuit() }}{{ nextCard.getValue()|join('/') }})
    {% else %}
        <p>The deck is empty.</p>
    {% endif %}
    <p>Cards left in deck: {{ deckCount }}</p>
</div>

</div>
{% endblock %}
